{% extends 'templates/base_temp.html' %}

 {% load static %}
 
 {% block style %}

 <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">


{% endblock %}


{% block title %}predict{% endblock %}

{% block content %}

<h1 class="predict">Let's predict!</h1>

<form class="select-menu" method="post" action="{% url 'services:predict' %}">
    {% csrf_token %}
    <select class="form-select" name="home">
      <option selected>Select home team</option>
      {% for team in teams %}
        <option value="{{team}}">{{team}}</option>
      {% endfor %}
    </select>
    <br>
    <select class="form-select" name="away">
      <option selected>Select away team</option>
      {% for team in teams %}
        <option value="{{team}}">{{team}}</option>
      {% endfor %}
    </select>
    <br>
    <button type="submit" class="btn btn-danger" name="save">Predict</button>
</form>

{% if status %}
  <div class="status">
    <p class="display-6">{{status}}</p>
    <div id="piechart"></div>
  </div>



{% endif %}



<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
// Load google charts
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

// Draw the chart and set the chart values
function drawChart() {
  var data = google.visualization.arrayToDataTable([
  ['Team', 'Probability'],
  ['{{home|safe}}', {{probs.2|safe}}],
  ['{{away|safe}}', {{probs.0|safe}}],
  ['Draw', {{probs.1|safe}}],

]);

  // Optional; add a title and set the width and height of the chart
  var options = {'title':'Winning Probability', 'width':550, 'height':400};

  // Display the chart inside the <div> element with id="piechart"
  var chart = new google.visualization.PieChart(document.getElementById('piechart'));
  chart.draw(data, options);
}
</script>





{% endblock %}
